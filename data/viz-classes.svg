<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="2521px" height="1081px" viewBox="-0.5 -0.5 2521 1081" content="&lt;mxfile host=&quot;app.diagrams.net&quot; modified=&quot;2020-08-06T09:17:27.897Z&quot; agent=&quot;5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/83.0.4103.116 Safari/537.36&quot; version=&quot;13.5.7&quot; etag=&quot;1rg-6Z1nUpFzJ8jaSRhY&quot; type=&quot;google&quot;&gt;&lt;diagram id=&quot;7la-dIhZ43odmK1HXPM6&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;" style="background-color: rgb(255, 255, 255);"><defs/><g><rect x="20" y="520" width="600" height="560" fill="none" stroke="#3399ff" stroke-dasharray="3 3" pointer-events="all"/><path d="M 960 821.6 L 960 100" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1120 660 L 1120 628.12" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1120 621.12 L 1123.5 628.12 L 1116.5 628.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 992.01 700 L 926.37 700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 999.01 700 L 995.51 702.06 L 992.01 700 L 995.51 697.94 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 921.12 700 L 928.12 696.5 L 926.37 700 L 928.12 703.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 700px; margin-left: 960px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">(M.R.)</div></div></div></foreignObject><text x="960" y="703" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">(M.R.)</text></switch></g><path d="M 1247.99 720 L 1313.63 720" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1240.99 720 L 1244.49 717.94 L 1247.99 720 L 1244.49 722.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1318.88 720 L 1311.88 723.5 L 1313.63 720 L 1311.88 716.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1000" y="660" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 700px; margin-left: 1001px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::CompositorFrameSinkImpl<br />负责分发CF</div></div></div></foreignObject><text x="1120" y="704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::CompositorFrameSinkImpl...</text></switch></g><path d="M 1480 652.01 L 1480 640 L 1440 640 L 1440 626.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1480 659.01 L 1477.94 655.51 L 1480 652.01 L 1482.06 655.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1440 621.12 L 1443.5 628.12 L 1440 626.37 L 1436.5 628.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1640 700 L 1951.88 700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1958.88 700 L 1951.88 703.5 L 1951.88 696.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1320" y="660" width="320" height="80" rx="12" ry="12" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 318px; height: 1px; padding-top: 700px; margin-left: 1321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::CompositorFrameSinkSupport<br />SubmitCompositorFrame()<br />负责触发client的OnBeginFrame，并且处理接收到的CF。它把CF存入viz::Surface中,最后viz::Display取出Surface进行渲染。创建它的时候它会自行加入BeginFrameSource中</div></div></div></foreignObject><text x="1480" y="704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::CompositorFrameSinkSupport...</text></switch></g><rect x="1000" y="540" width="240" height="80" rx="12" ry="12" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 580px; margin-left: 1001px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::mojom::CompositorFrameSink<br />SetNeedsBeginFrame()<br />SubmitCompositorFrame(Sync)()<br />DidNotProduceFrame()</div></div></div></foreignObject><text x="1120" y="584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::mojom::CompositorFrameSink...</text></switch></g><path d="M 1120 380 L 1120 410 L 1120 411.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1120 418.88 L 1116.5 411.88 L 1123.5 411.88 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1247.99 340 L 1280 340 L 1280 700 L 1246.37 700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1240.99 340 L 1244.49 337.94 L 1247.99 340 L 1244.49 342.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1241.12 700 L 1248.12 696.5 L 1246.37 700 L 1248.12 703.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 991.01 340 L 949 340 L 925.37 340" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 998.01 340 L 994.51 342.06 L 991.01 340 L 994.51 337.94 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 920.12 340 L 927.12 336.5 L 925.37 340 L 927.12 343.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 341px; margin-left: 959px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">(M.R.)</div></div></div></foreignObject><text x="959" y="345" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">(M.R.)</text></switch></g><path d="M 1247.99 340 L 1280 340 L 1280 580 L 1313.63 580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1240.99 340 L 1244.49 337.94 L 1247.99 340 L 1244.49 342.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1318.88 580 L 1311.88 583.5 L 1313.63 580 L 1311.88 576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1247.99 340 L 1313.63 340" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1240.99 340 L 1244.49 337.94 L 1247.99 340 L 1244.49 342.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1318.88 340 L 1311.88 343.5 L 1313.63 340 L 1311.88 336.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1247.99 340 L 1280 340 L 1280 460 L 1313.63 460" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1240.99 340 L 1244.49 337.94 L 1247.99 340 L 1244.49 342.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1318.88 460 L 1311.88 463.5 L 1313.63 460 L 1311.88 456.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1000" y="300" width="240" height="80" rx="12" ry="12" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 340px; margin-left: 1001px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::FrameSinkManager(Impl)<br />RegisterBeginFrameSource():注册BFS<br />surface_manager_:viz::SurfaceManager<br />负责建立CFSClient和CFS的连接，它是viz的入口。每一个BFS都对应一个FrameSinkId</div></div></div></foreignObject><text x="1120" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::FrameSinkManager(Impl)...</text></switch></g><path d="M 1567.99 580 L 1633.63 580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1560.99 580 L 1564.49 577.94 L 1567.99 580 L 1564.49 582.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1638.88 580 L 1631.88 583.5 L 1633.63 580 L 1631.88 576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1320" y="540" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 580px; margin-left: 1321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::SurfaceManager<br />CreateSurface()<br />SurfaceActivated/Modified()<br />将CF存储到Surface中并通知observer进行渲染</div></div></div></foreignObject><text x="1440" y="584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::SurfaceManager...</text></switch></g><path d="M 1560 220 L 1633.63 220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1638.88 220 L 1631.88 223.5 L 1633.63 220 L 1631.88 216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1320" y="180" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 220px; margin-left: 1321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::OutputSurfaceProvider(Impl)<br />CreateOutputSurface()</div></div></div></foreignObject><text x="1440" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::OutputSurfaceProvider(Impl)...</text></switch></g><rect x="1640" y="180" width="240" height="80" rx="12" ry="12" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 220px; margin-left: 1641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::OutputSurface<br />SwapBuffers()<br />负责将画面最终显示到界面中；提供用于显示合成后的画面的buffers，有三类buffer：Software/OpenGL/Vulkan</div></div></div></foreignObject><text x="1760" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::OutputSurface...</text></switch></g><path d="M 1960 200 L 1920 200 L 1920 220 L 1888.12 220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1881.12 220 L 1888.12 216.5 L 1888.12 223.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2080 132.01 L 2080 106.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2080 139.01 L 2077.94 135.51 L 2080 132.01 L 2082.06 135.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2080 101.12 L 2083.5 108.12 L 2080 106.37 L 2076.5 108.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1960" y="140" width="240" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 160px; margin-left: 1961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::SoftwareOutputSurface<br />负责软件维护软件渲染表面</div></div></div></foreignObject><text x="2080" y="164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::SoftwareOutputSurface...</text></switch></g><rect x="1960" y="20" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 60px; margin-left: 1961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::SoftwareOutputDevice<br />BeginPaint():SkCanvas<br />用于提供软件渲染所需要的SkCanvas，并负责输出渲染结果</div></div></div></foreignObject><text x="2080" y="64" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::SoftwareOutputDevice...</text></switch></g><path d="M 2280 60 L 2208.12 60" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2201.12 60 L 2208.12 56.5 L 2208.12 63.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2280" y="20" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 60px; margin-left: 2281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::SoftwareOutputDeviceX11<br />viz::SoftwareOutputDeviceWin*<br />viz::SoftwareOutputDeviceOzone<br />对应到各平台的实现</div></div></div></foreignObject><text x="2400" y="64" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::SoftwareOutputDeviceX11...</text></switch></g><rect x="1640" y="540" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 580px; margin-left: 1641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::Surface<br />QueueFrame()</div></div></div></foreignObject><text x="1760" y="584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::Surface...</text></switch></g><rect x="1000" y="420" width="240" height="80" rx="12" ry="12" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 460px; margin-left: 1001px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::mojom::FrameSinkManager<br />RegisterFrameSinkId()<br />Create(Root)CompositorFrameSink()<br />DidBeginFrame()</div></div></div></foreignObject><text x="1120" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::mojom::FrameSinkManager...</text></switch></g><rect x="680" y="300" width="240" height="80" rx="12" ry="12" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 340px; margin-left: 681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::mojom::FrameSinkManagerClient<br />OnFirstSurfaceActivation()<br />OnFrameTokenChanged()</div></div></div></foreignObject><text x="800" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::mojom::FrameSinkManagerClient...</text></switch></g><path d="M 480 420 L 480 388.12" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 480 381.12 L 483.5 388.12 L 476.5 388.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 360 460 L 286.37 460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 281.12 460 L 288.12 456.5 L 286.37 460 L 288.12 463.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 607.99 460 L 673.63 460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 600.99 460 L 604.49 457.94 L 607.99 460 L 604.49 462.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 678.88 460 L 671.88 463.5 L 673.63 460 L 671.88 456.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 607.99 480 L 640 480 L 640 560 L 673.63 560" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 600.99 480 L 604.49 477.94 L 607.99 480 L 604.49 482.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 678.88 560 L 671.88 563.5 L 673.63 560 L 671.88 556.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 511px; margin-left: 641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">（1:n）</div></div></div></foreignObject><text x="641" y="515" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">（1:n）</text></switch></g><rect x="360" y="420" width="240" height="80" rx="12" ry="12" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 460px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #333333; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">demo::DemoHost<br />widget_:gfx::AcceleratedWidget<br />manager_:viz::HostFrameSinkManager<br />client_:demo::DemoClient<br />注册client</div></div></div></foreignObject><text x="480" y="464" fill="#333333" font-family="Helvetica" font-size="12px" text-anchor="middle">demo::DemoHost...</text></switch></g><rect x="40" y="440" width="240" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 460px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">gfx::AcceleratedWidget<br />对应各平台Native的UI组件</div></div></div></foreignObject><text x="160" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">gfx::AcceleratedWidget...</text></switch></g><rect x="360" y="300" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 340px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::HostFrameSinkClient<br />OnFirstSurfaceActivation()<br />OnFrameTokenChanged()<br />所有实现该接口的类都是为了和FSM交互，大部分都是为了注册client</div></div></div></foreignObject><text x="480" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::HostFrameSinkClient...</text></switch></g><path d="M 800 420 L 800 388.12" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 800 381.12 L 803.5 388.12 L 796.5 388.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 927.99 460 L 993.63 460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 920.99 460 L 924.49 457.94 L 927.99 460 L 924.49 462.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 998.88 460 L 991.88 463.5 L 993.63 460 L 991.88 456.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 460px; margin-left: 960px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">(M.R.)</div></div></div></foreignObject><text x="960" y="463" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">(M.R.)</text></switch></g><path d="M 680 440 L 640 440 L 640 340 L 606.37 340" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 601.12 340 L 608.12 336.5 L 606.37 340 L 608.12 343.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="680" y="420" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 460px; margin-left: 681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::HostFrameSinkManager<br />BindAndSetManager()<br />RegisterFrameSinkId()<br />Create(Root)CompositorFrameSink()<br />代理对FrameSinkManager的调用</div></div></div></foreignObject><text x="800" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::HostFrameSinkManager...</text></switch></g><path d="M 800 620 L 800 651.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 800 658.88 L 796.5 651.88 L 803.5 651.88 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 927.99 580 L 993.63 580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 920.99 580 L 924.49 577.94 L 927.99 580 L 924.49 582.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 998.88 580 L 991.88 583.5 L 993.63 580 L 991.88 576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 581px; margin-left: 962px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">(M.R.)</div></div></div></foreignObject><text x="962" y="585" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">(M.R.)</text></switch></g><path d="M 680 580 L 606.37 580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 601.12 580 L 608.12 576.5 L 606.37 580 L 608.12 583.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="680" y="540" width="240" height="80" rx="12" ry="12" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 580px; margin-left: 681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #333333; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">demo::DemoClient<br />负责生成并提交CF到CFS，每一个Client都对应一个FrameSinkId和LocalSurfaceId，可以独立产生用于显示的CF</div></div></div></foreignObject><text x="800" y="584" fill="#333333" font-family="Helvetica" font-size="12px" text-anchor="middle">demo::DemoClient...</text></switch></g><rect x="680" y="660" width="240" height="80" rx="12" ry="12" fill="#f8cecc" stroke="#b85450" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 700px; margin-left: 681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::mojom::CompositorFrameSinkClient<br />DidReceiveCompositorFrameAck()<br />OnBeginFrame()<br />OnBeginFramePausedChanged()<br />ReclaimResources()</div></div></div></foreignObject><text x="800" y="704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::mojom::CompositorFrameSinkClient...</text></switch></g><path d="M 607.99 220 L 673.63 220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 600.99 220 L 604.49 217.94 L 607.99 220 L 604.49 222.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 678.88 220 L 671.88 223.5 L 673.63 220 L 671.88 216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="360" y="180" width="240" height="80" rx="12" ry="12" fill="#f5f5f5" stroke="#666666" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 220px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #333333; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">demo::DemoService<br />runner:viz::VizCompositorThreadRunnerImpl<br />负责初始化Compositor内核</div></div></div></foreignObject><text x="480" y="224" fill="#333333" font-family="Helvetica" font-size="12px" text-anchor="middle">demo::DemoService...</text></switch></g><path d="M 927.99 220 L 1120 220 L 1120 293.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 920.99 220 L 924.49 217.94 L 927.99 220 L 924.49 222.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1120 298.88 L 1116.5 291.88 L 1120 293.63 L 1123.5 291.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 927.99 220 L 1313.63 220" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 920.99 220 L 924.49 217.94 L 927.99 220 L 924.49 222.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1318.88 220 L 1311.88 223.5 L 1313.63 220 L 1311.88 216.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="680" y="180" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 220px; margin-left: 681px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::VizCompositorThreadRunner(Impl)<br />CreateFrameSinkManager()<br />维护VizCompositorThread,该线程用于执行合成操作。可以通过自定义该类来实现自定义输出目标</div></div></div></foreignObject><text x="800" y="224" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::VizCompositorThreadRunner(Impl)...</text></switch></g><rect x="990" y="109" width="140" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 119px; margin-left: 1060px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">运行在Compositor线程</div></div></div></foreignObject><text x="1060" y="123" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">运行在Compositor线程</text></switch></g><rect x="800" y="109" width="150" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 119px; margin-left: 875px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">运行在主线程或单独线程</div></div></div></foreignObject><text x="875" y="123" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">运行在主线程或单独线程</text></switch></g><rect x="1080" y="70" width="310" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 80px; margin-left: 1235px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">M.R. = mojo::Remote 表示通过mojo接口建立的依赖关系</div></div></div></foreignObject><text x="1235" y="84" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">M.R. = mojo::Remote 表示通过mojo接口建立的依赖关系</text></switch></g><rect x="1960" y="180" width="240" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 200px; margin-left: 1961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::GLOutputSurface<br />viz::SkiaOutputSurface</div></div></div></foreignObject><text x="2080" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::GLOutputSurface...</text></switch></g><rect x="1960" y="220" width="240" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 240px; margin-left: 1961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">android_webview::ParentOutputSurface<br />android_webview::SynchronousLayerTreeFrameSink::<br />SoftwareOutputSurface</div></div></div></foreignObject><text x="2080" y="244" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">android_webview::ParentOutputSurface...</text></switch></g><rect x="2200" y="180" width="240" height="40" rx="6" ry="6" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 200px; margin-left: 2201px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::GLOutputSurfaceOffscreen<br />viz::GLOutputSurface(Android/ChromeOS)</div></div></div></foreignObject><text x="2320" y="204" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::GLOutputSurfaceOffscreen...</text></switch></g><path d="M 1760 292.01 L 1760 266.37" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1760 299.01 L 1757.94 295.51 L 1760 292.01 L 1762.06 295.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1760 261.12 L 1763.5 268.12 L 1760 266.37 L 1756.5 268.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1887.99 340 L 1953.63 340" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1880.99 340 L 1884.49 337.94 L 1887.99 340 L 1884.49 342.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1958.88 340 L 1951.88 343.5 L 1953.63 340 L 1951.88 336.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1760 380 L 1760 410 L 1760 411.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1760 418.88 L 1756.5 411.88 L 1763.5 411.88 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1887.99 340 L 1920 340 L 1920 580 L 1953.63 580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1880.99 340 L 1884.49 337.94 L 1887.99 340 L 1884.49 342.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1958.88 580 L 1951.88 583.5 L 1953.63 580 L 1951.88 576.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1887.99 340 L 1920 340 L 1920 460 L 1953.63 460" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1880.99 340 L 1884.49 337.94 L 1887.99 340 L 1884.49 342.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1958.88 460 L 1951.88 463.5 L 1953.63 460 L 1951.88 456.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1632.01 360 L 1600 360 L 1600 560 L 1566.37 560" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1639.01 360 L 1635.51 362.06 L 1632.01 360 L 1635.51 357.94 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1561.12 560 L 1568.12 556.5 L 1566.37 560 L 1568.12 563.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1640 360 L 1600 360 L 1600 460 L 1566.37 460" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1561.12 460 L 1568.12 456.5 L 1566.37 460 L 1568.12 463.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1640" y="300" width="240" height="80" rx="12" ry="12" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 340px; margin-left: 1641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::Display<br />SetLocalSurfaceId()<br />使用合成器将当前Surface合成，并使用DirectRenderer进行绘制并最终显示。它就是所谓的Display Compositor.负责通知DisplayerScheduler将自己加入BFS</div></div></div></foreignObject><text x="1760" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::Display...</text></switch></g><rect x="1640" y="420" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 460px; margin-left: 1641px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::DisplaySchedulerClient<br />viz::OutputSurfaceClient<br /><b>DrawAndSwap()<br />SurfaceDamaged()<br /></b></div></div></div></foreignObject><text x="1760" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::DisplaySchedulerClient...</text></switch></g><path d="M 2080 620 L 2080 651.88" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2080 658.88 L 2076.5 651.88 L 2083.5 651.88 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 2200 580 L 2271.88 580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2278.88 580 L 2271.88 583.5 L 2271.88 576.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1960" y="540" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 580px; margin-left: 1961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::DisplayScheduler<br /><b>DrawAndSwap()</b><br />用于调度Draw/Swap的时机，控制帧率，BFS和SurfaceManager都会驱动它前进（最新代码该类只由SurfaceManger驱动）</div></div></div></foreignObject><text x="2080" y="584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::DisplayScheduler...</text></switch></g><rect x="2280" y="540" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 580px; margin-left: 2281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::SurfaceObserver<br />OnSurfaceActivated/Damaged()<br />用于从SurfaceManager接收Surface改变通知</div></div></div></foreignObject><text x="2400" y="584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::SurfaceObserver...</text></switch></g><rect x="1960" y="420" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 460px; margin-left: 1961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::SurfaceAggregator<br />Aggregate()<br />将当前surface合成到一个CF中</div></div></div></foreignObject><text x="2080" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::SurfaceAggregator...</text></switch></g><path d="M 1567.99 340 L 1633.63 340" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1560.99 340 L 1564.49 337.94 L 1567.99 340 L 1564.49 342.06 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1638.88 340 L 1631.88 343.5 L 1633.63 340 L 1631.88 336.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1440 300 L 1440 266.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 1440 261.12 L 1443.5 268.12 L 1440 266.37 L 1436.5 268.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1440 387.99 L 1440 413.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1440 380.99 L 1442.06 384.49 L 1440 387.99 L 1437.94 384.49 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1440 418.88 L 1436.5 411.88 L 1440 413.63 L 1443.5 411.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1320" y="300" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 340px; margin-left: 1321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::RootCompositorFrameSinkImpl<br />专门对接root client的CFS</div></div></div></foreignObject><text x="1440" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::RootCompositorFrameSinkImpl...</text></switch></g><path d="M 2080 292.01 L 2080 280 L 1820 280 L 1820 266.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3" pointer-events="stroke"/><path d="M 2080 299.01 L 2077.94 295.51 L 2080 292.01 L 2082.06 295.51 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1820 261.12 L 1823.5 268.12 L 1820 266.37 L 1816.5 268.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1960" y="300" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 340px; margin-left: 1961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::DirectRenderer<br /><b>DrawFrame()</b>:执行真正的绘制<br /><b>SwapBuffers*()</b>:交换缓存，进行显示<br />根据DrawQuad的类型将内容绘制到由OutputSurface提供的buffer中去</div></div></div></foreignObject><text x="2080" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::DirectRenderer...</text></switch></g><path d="M 2280 340 L 2208.12 340" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 2201.12 340 L 2208.12 336.5 L 2208.12 343.5 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="2280" y="300" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 340px; margin-left: 2281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::GLRenderer<br />viz::SkiaRenderer<br />viz::SoftwareRenderer<br />DoDrawQuad():实现Quad的绘制<br />不同的绘制(光栅化)和渲染后端</div></div></div></foreignObject><text x="2400" y="344" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::GLRenderer...</text></switch></g><rect x="1320" y="420" width="240" height="80" rx="12" ry="12" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 460px; margin-left: 1321px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::BeginFrameSource<br />渲染的发动机，用于产生OnBeginFrame事件，推动support请求CF，推动DisplayScheduler执行渲染</div></div></div></foreignObject><text x="1440" y="464" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::BeginFrameSource...</text></switch></g><rect x="1960" y="660" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 700px; margin-left: 1961px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::BeginFrameObserver(Base)<br />OnBeginFrame()<br />用于从BeginFrameSource接收OnBeginFrame通知</div></div></div></foreignObject><text x="2080" y="704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::BeginFrameObserver(Base)...</text></switch></g><path d="M 352.01 580 L 286.37 580" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 359.01 580 L 355.51 582.06 L 352.01 580 L 355.51 577.94 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 281.12 580 L 288.12 576.5 L 286.37 580 L 288.12 583.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 480 627.99 L 480 653.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 480 620.99 L 482.06 624.49 L 480 627.99 L 477.94 624.49 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 480 658.88 L 476.5 651.88 L 480 653.63 L 483.5 651.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 640px; margin-left: 480px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">1:n</div></div></div></foreignObject><text x="480" y="643" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">1:n</text></switch></g><path d="M 352.01 600 L 320 600 L 320 720 L 286.37 720" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 359.01 600 L 355.51 602.06 L 352.01 600 L 355.51 597.94 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 281.12 720 L 288.12 716.5 L 286.37 720 L 288.12 723.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 660px; margin-left: 320px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">1:n</div></div></div></foreignObject><text x="320" y="663" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">1:n</text></switch></g><rect x="360" y="540" width="240" height="80" rx="12" ry="12" fill="#dae8fc" stroke="#6c8ebf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 580px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::CompositorFrame<br />render_pass_list:RenderPassList<br />resource_list:TransferableResource<br />metadata:CompositorFrameMetadata<br />记录某一区域的一帧画面及相关资源</div></div></div></foreignObject><text x="480" y="584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::CompositorFrame...</text></switch></g><path d="M 160 787.99 L 160 813.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 160 780.99 L 162.06 784.49 L 160 787.99 L 157.94 784.49 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 160 818.88 L 156.5 811.88 L 160 813.63 L 163.5 811.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="40" y="660" width="240" height="120" rx="18" ry="18" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 720px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::TransferableResource<br />static MakeGL/Software()<br />id:ResourceId<br />mailbox_holder:gpu::MailboxHolder<br />表示一个可传输的资源</div></div></div></foreignObject><text x="160" y="724" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::TransferableResource...</text></switch></g><path d="M 480 787.99 L 480 813.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 480 780.99 L 482.06 784.49 L 480 787.99 L 477.94 784.49 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 480 818.88 L 476.5 811.88 L 480 813.63 L 483.5 811.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 800px; margin-left: 480px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">1:n</div></div></div></foreignObject><text x="480" y="803" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">1:n</text></switch></g><rect x="360" y="660" width="240" height="120" rx="18" ry="18" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 720px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::RenderPass<br />static Create()<br />CreateAndAppendDrawQuad()<br />id:RenderPassId<br />copy_requests:CopyOutputRequest<br />quad_list:QuadList<br />记录一组绘制操作</div></div></div></foreignObject><text x="480" y="724" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::RenderPass...</text></switch></g><rect x="40" y="540" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 580px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::CompositorFrameMetadata<br />device_scale_factor:float<br />latency_info:ui::LatencyInfo<br />referenced_surfaces:SurfaceRange<br />begin_frame_ack:BeginFrameAck<br />记录CF相关的元数据</div></div></div></foreignObject><text x="160" y="584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::CompositorFrameMetadata...</text></switch></g><rect x="360" y="820" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 860px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::DrawQuad<br />material:Material<br />resources:Resources 引用到的资源<br />记录一个绘制操作</div></div></div></foreignObject><text x="480" y="864" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::DrawQuad...</text></switch></g><path d="M 480 940 L 480 908.12" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 480 901.12 L 483.5 908.12 L 476.5 908.12 Z" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="360" y="940" width="240" height="120" rx="18" ry="18" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 1000px; margin-left: 361px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">viz::TileDrawQuad<br />viz::PictureDrawQuad<br />viz::RenderPassDrawQuad<br />viz::SolidColorDrawQuad<br />viz::SurfaceDrawQuad<br />viz::TextureDrawQuad<br />viz::VideoHoleDrawQuad<br />viz::YUVVideoDrawQuad</div></div></div></foreignObject><text x="480" y="1004" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">viz::TileDrawQuad...</text></switch></g><rect x="40" y="820" width="240" height="80" rx="12" ry="12" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 238px; height: 1px; padding-top: 860px; margin-left: 41px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">gpu::MailboxHolder<br />mailbox:Mailbox 资源的名字，唯一标识资源<br />sync_token:SyncToken<br />texture_target:uint32_t<br />引用一个具体的资源</div></div></div></foreignObject><text x="160" y="864" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">gpu::MailboxHolder...</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://desk.draw.io/support/solutions/articles/16000042487" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>